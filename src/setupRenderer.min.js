let globalLayoutData={};function groupLayoutsByFirstLetter(e){const t={};return e.forEach((e=>{const c=e.name[0].toUpperCase();t[c]||(t[c]=[]),t[c].push(e)})),t}function createLayoutSections(e){const t=document.getElementById("layout-container");t.innerHTML="",Object.keys(e).sort().forEach((c=>{const o=document.createElement("div");o.className="letter-section";const a=document.createElement("div");a.className="letter-header",a.textContent=c,a.onclick=()=>{document.querySelectorAll(".letter-section").forEach((e=>e.classList.remove("active"))),o.classList.add("active")};const n=document.createElement("div");n.className="letter-content",e[c].forEach((e=>{const t=document.createElement("input");t.type="checkbox",t.value=e.id,t.className="layout-checkbox";const c=document.createElement("label");c.className="layout-item",c.appendChild(t),c.appendChild(document.createTextNode(` ${e.name}`)),n.appendChild(c),n.appendChild(document.createElement("br"))})),o.appendChild(a),o.appendChild(n),t.appendChild(o)}))}function getSelectedLayouts(e){const t=Array.from(document.querySelectorAll(".layout-checkbox:checked")).map((e=>e.value)),c=[];for(const o of Object.values(e))for(const e of o)t.includes(e.id)&&c.push(e);return c}fetch("keyboard_layouts.json").then((e=>e.json())).then((e=>{globalLayoutData=e,createLayoutSections(globalLayoutData),window.easykeyb.getLayouts().then((e=>{document.querySelectorAll(".layout-checkbox").forEach((t=>{e.includes(t.value)&&(t.checked=!0)}))}))})).catch((e=>{})),document.getElementById("ok-button").addEventListener("click",(()=>{const e=Array.from(document.querySelectorAll(".layout-checkbox:checked")).map((e=>e.value));window.easykeyb.saveLayouts(e),window.easykeyb.closeSetupWindow()})),document.getElementById("cancel-button").addEventListener("click",(()=>{window.easykeyb.closeSetupWindow()}));